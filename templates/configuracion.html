{% include 'header.html' %}
<main id="main" class="main">
  <div class="pagetitle">
    <h1>Configuración</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/index">Inicio</a></li>
        <li class="breadcrumb-item">Configuración</li>
      </ol>
    </nav>
  </div>
  <section class="section">
    <div class="row">
      <div class="col-12 col-md-12 offset-md-12">
        <div class="col-lg-12">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Configurar puerto squid</h5>
              <div>
                
                <p>Puerto utilizado: {{puerto}}</p>
                <form action="/configurar_puerto" method="post">
                  <label for="puerto">Puerto:</label>
                  <input placeholder="3128" type="text" id="puerto" name="puerto" required class="form-control"/><br /><br />
                  <input type="submit" value="Guardar puerto" class="btn btn-primary" />
                </form>
              </div>
              <h5 class="card-title">Estado Squid</h5>
              <h3 id="estado" style="font-weight: 700;">Estado {{estado}}</h6>
              <div>
                <a href="javascript:void(0)" onclick="apagarSquid()" class="btn btn-danger" id="apagar">Apagar
                  Squid</a>
                <a href="javascript:void(0)" onclick="encenderSquid()" class="btn btn-success" id="encender">Encender
                  Squid</a>
                <a href="javascript:void(0)" onclick="reiniciarSquid()" class="btn btn-warning" id="reiniciar">Reiniciar
                  Squid</a>
                  <a href="javascript:void(0)" onclick="leerSquid()" class="btn btn-info" id="leer">Leer Archivo
                    Squid</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>
{% include 'footer.html' %}
<script>
  const estado = "{{estado}}";
  const apagarBtn = document.getElementById("apagar");
  const encenderBtn = document.getElementById("encender");
  const reiniciarBtn = document.getElementById("reiniciar");
  const leerBtn = document.getElementById('leer')
  const estadoTitle = document.getElementById("estado");

  if (estado === "inactive") {
    estadoTitle.classList.add("text-danger");
    estadoTitle.innerText = "Estado: Apagado";
    apagarBtn.classList.add("disabled");
  }

  if (estado === "active") {
    estadoTitle.classList.add("text-success");
    estadoTitle.innerText = "Estado: Encendido";
    encenderBtn.classList.add("disabled");
  }

  function apagarSquid() {
    encenderBtn.classList.add("disabled");
    leerBtn.classList.add('disabled')
    reiniciarBtn.classList.add("disabled");
    apagarBtn.classList.add("disabled");
    estadoTitle.innerText = "Apagando Squid...";
    estadoTitle.classList.remove("text-danger");
    estadoTitle.classList.add("text-warning");
    window.location.href = "/apagar_squid";
  }

  function encenderSquid() {
    encenderBtn.classList.add("disabled");
    leerBtn.classList.add('disabled')
    reiniciarBtn.classList.add("disabled");
    apagarBtn.classList.add("disabled");
    estadoTitle.innerText = "Encendiendo Squid...";
    estadoTitle.classList.remove("text-danger");
    estadoTitle.classList.add("text-warning");
    window.location.href = "/encender_squid";
  }

  function reiniciarSquid() {
    encenderBtn.classList.add("disabled");
    reiniciarBtn.classList.add("disabled");
    apagarBtn.classList.add("disabled");
    estadoTitle.innerText = "Reiniciando Squid...";
    estadoTitle.classList.remove("text-danger");
    estadoTitle.classList.add("text-warning");
    window.location.href = "/reiniciar_squid";
  }

  function leerSquid() {
    encenderBtn.classList.add("disabled");
    leerBtn.classList.add('disabled')
    reiniciarBtn.classList.add("disabled");
    apagarBtn.classList.add("disabled");
    estadoTitle.innerText = "Leyendo Squid...";
    estadoTitle.classList.remove("text-danger");
    estadoTitle.classList.add("text-warning");
    window.location.href = "/leer_squid";
  }
</script>